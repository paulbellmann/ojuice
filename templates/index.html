{% extends 'base.html' %}

{% block title %}
    {{ title }}
{% endblock title %}

{% block content %}
    {% if messages %}
    <div class="container">
            <div class="messages todolist">
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}" role="alert">
                    {{ message }}
                </div>
            {% endfor %}
            </div>
    </div>
    {% endif %}

    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="todolist">
                 <h1>{{title}}</h1>
                 <p>{{ discription }}</p>
                 <form action="{% url 'create' %}">
                    <input name="title" type="text" class="form-control add-todo" placeholder="Add quick todo (#Title Body)">
                    <input name="quick" type="hidden" value="1">
                    <input name="body" type="hidden" value=" ">
                 </form>

                            <hr>
                            <ul id="sortable" class="list-unstyled">
                            {% for todo in todos %}
                            <li class="ui-state-default">
                            <div class="checkbox">
                                <label>
                                    {% if todo.checked %}
                                        <input checked type="checkbox" onclick="myFunction({{todo.id}})" /><b>{{todo.title}}</b>: {{todo.body}}</label>
                                    {% else %}
                                        <input type="checkbox" onclick="myFunction({{todo.id}})" /><b>{{todo.title}}</b>: {{todo.body}}</label>
                                    {% endif %}
                                <div class="pull-right">
                                    <a href="{% url 'detail' todo.id %}" id="left_pencil">
                                        <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                                    </a>
                                    <a href="{% url 'delete' todo.id %}">
                                        <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                    </a>
                                </div>
                            </div>
                        </li>
                        {% endfor %}
                        </ul>
                    <div class="todo-footer">
                        <strong><span class="count-todos">{{todos|length}}</span></strong> Items Left
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
    $("#sortable").sortable();
    $("#sortable").disableSelection();
    function myFunction(id) {
        console.log(id);
        var url = "/blog/change_checked/?ID=" + parseInt(id)
        $.get(url, function(data, status){
                console.log("Status: " + status);
        });
    };
    </script>
{% endblock content %}